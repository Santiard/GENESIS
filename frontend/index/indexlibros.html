<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/stylelibros.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <title>Reservar Libros</title>
    

    <div class="banner">
        <img src="IMAGENES/LOGOUDES.png" alt="">
        <h1>GENESIS PLUS</h1>
        <h3>Sistema de gestión de estudiantes</h3>
        <h4>Cúcuta Semestre 2024B</h4>
    </div>


</head>
<body>

    <ul class="menu">
        <li><a href="indexhome.html"><i class='bx bxs-home-alt-2'></i></a></li>
        <li><a href="#">Transmites academicos</a></li>
        <li><a href="#">Record de notas</a></li>
        <li><a href="#">Plan de estudio</a></li>
        <li><a href="#">Matricula</a></li>
        <li><a href="indexhorario.html">Horario</a></li>
        <li ><a href="indexnotasyasistencias.html">Notas</a></li>
        <li><a href="indexconfiguracion.html">Configuracion</a></li>
        <li><a href="#" onclick="mostrarNotificaciones()"><i class='bx bx-bell' ></i></a></li>
        <li class="user"><a href="indexperfil.html"><i class='bx bxs-user' >NOMBRE</i></a></li>
    </ul>


    <div class="container">
        <h1>Reserva de Libros</h1>

        <!-- Buscador por ISBN o Título -->
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Buscar por ISBN o título" onkeyup="filtrarLibros()">
        </div>
        <div class="tabla">
        <form id="libroForm">
            <table class="tablaLibros" id="tablaLibros">
                <thead>
                    <tr>
                        <th>Seleccionar</th>
                        <th>ISBN</th>
                        <th>Título</th>
                        <th>Autor</th>
                        <th>Editorial</th>
                        <th>Unidades Disponibles</th>
                        <th>Disponibilidad</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Ejemplo de libros con ISBN y unidades disponibles (aleatorios) -->
                    <tr>
                        <td><input type="checkbox" name="libro" value="El Quijote" disabled></td>
                        <td>978-3-16-148410-0</td>
                        <td>El Quijote</td>
                        <td>Miguel de Cervantes</td>
                        <td>Editorial Clásicos</td>
                        <td>0</td>
                        <td>No Disponible</td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" name="libro" value="Cien Años de Soledad"></td>
                        <td>978-1-60309-452-8</td>
                        <td>Cien Años de Soledad</td>
                        <td>Gabriel García Márquez</td>
                        <td>Editorial Sudamericana</td>
                        <td>3</td>
                        <td>Disponible</td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" name="libro" value="1984"></td>
                        <td>978-0-14-103614-4</td>
                        <td>1984</td>
                        <td>George Orwell</td>
                        <td>Secker & Warburg</td>
                        <td>5</td>
                        <td>Disponible</td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" name="libro" value="El amor en los tiempos del cólera"></td>
                        <td>978-0-385-49777-4</td>
                        <td>El amor en los tiempos del cólera</td>
                        <td>Gabriel García Márquez</td>
                        <td>Penguin Books</td>
                        <td>2</td>
                        <td>Disponible</td>
                    </tr>
                </tbody>
            </table>
        </div>
            <button type="button" class="btn-reservar" onclick="reservarLibros()">Reservar Seleccionados</button>
        </form>
        
        <p id="mensaje"></p>
    </div>

    <div id="panelNotificaciones" class="notificaciones">
        <button class="close-btn" onclick="cerrarNotificaciones()">×</button>
        <h3>Notificaciones</h3>
        <div class="notificacion notificacion-importante">
            <p><strong>Importante:</strong> Recuerda subir todos los documentos requeridos antes del 15 de octubre.</p>
        </div>
        <div class="notificacion notificacion-normal">
            <p>Tu solicitud de descuento por excelencia académica ha sido aprobada.</p>
        </div>
        <div class="notificacion notificacion-alerta">
            <p><strong>Alerta:</strong> La solicitud de descuento por situación financiera ha sido rechazada.</p>
        </div>
    </div>

    <script>
        // Función para filtrar libros por ISBN o título
        function filtrarLibros() {
            const input = document.getElementById("searchInput").value.toLowerCase();
            const table = document.getElementById("tablaLibros");
            const rows = table.getElementsByTagName("tr");

            for (let i = 1; i < rows.length; i++) {
                const isbn = rows[i].getElementsByTagName("td")[1].textContent.toLowerCase();
                const titulo = rows[i].getElementsByTagName("td")[2].textContent.toLowerCase();

                if (isbn.includes(input) || titulo.includes(input)) {
                    rows[i].style.display = "";
                } else {
                    rows[i].style.display = "none";
                }
            }
        }

        // Función para gestionar la reserva de libros
        function reservarLibros() {
            const seleccionados = document.querySelectorAll('input[name="libro"]:checked');
            const mensaje = document.getElementById("mensaje");

            if (seleccionados.length === 0) {
                mensaje.textContent = "Por favor, selecciona al menos un libro para reservar.";
                mensaje.style.color = "red";
                return;
            }

            if (seleccionados.length > 3) {
                mensaje.textContent = "No puedes reservar más de 3 libros.";
                mensaje.style.color = "red";
                return;
            }

            let librosSeleccionados = [];
            seleccionados.forEach((libro) => {
                librosSeleccionados.push(libro.value); // Recogemos el nombre del libro
            });

            mensaje.textContent = "Has reservado los siguientes libros: " + librosSeleccionados.join(", ");
            mensaje.style.color = "green";
        }

        // Deshabilitar los checkboxes de los libros sin disponibilidad
        document.querySelectorAll('tbody tr').forEach(row => {
            const unidadesDisponibles = parseInt(row.getElementsByTagName('td')[5].textContent);
            if (unidadesDisponibles === 0) {
                row.querySelector('input[type="checkbox"]').disabled = true;
            }
        });

        function mostrarNotificaciones() {
            var panel = document.getElementById('panelNotificaciones');
            panel.classList.toggle('open');
        }   
    
        function cerrarNotificaciones() {
            var panel = document.getElementById('panelNotificaciones');
            panel.classList.remove('open');
        }

    </script>
</body>

<footer>
    <div class="legal">
    <p>Universidad de Santander - Sistemas de información</p>
    <p>Todos los derechos reservados © 2016</p>
    <p>Institución de Educación Superior sujeta a la inspección y vigilancia del Ministerio de Educación Nacional  </p>
</footer>

</html>

